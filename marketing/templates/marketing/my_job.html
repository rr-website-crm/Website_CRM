{% extends 'base.html' %}
{% load static %}

{% block title %}My Jobs - CRM Portal{% endblock %}

{% block content %}
<div class="dashboard-header">
    <h1 class="dashboard-title">My Jobs</h1>
    <p class="dashboard-subtitle">View and manage all your created jobs</p>
</div>
<a href="{% url 'marketing_dashboard' %}" class="btn btn-outline">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Back to Dashboard
        </a>

<div class="card">
    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
        <h2 class="card-title" style="margin: 0;">All Jobs</h2>
        <a href="{% url 'create_job' %}" class="btn btn-primary">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            Create New Job
        </a>
    </div>
    
    <div class="card-body">
        {% if jobs %}
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Job ID</th>
                            <th>Title</th>
                            <th>Client</th>
                            <th>Type</th>
                            <th>Priority</th>
                            <th>Status</th>
                            <th>Deadline</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for job in jobs %}
                        <tr>
                            <td>#{{ job.id }}</td>
                            <td>{{ job.title }}</td>
                            <td>{{ job.client }}</td>
                            <td>{{ job.type }}</td>
                            <td>
                                <span class="status-tag status-{{ job.priority }}">{{ job.priority }}</span>
                            </td>
                            <td>
                                <span class="status-tag status-{{ job.status }}">{{ job.status }}</span>
                            </td>
                            <td>{{ job.deadline|date:"d/m/Y" }}</td>
                            <td>
                                <button class="btn btn-outline" style="padding: 0.5rem 1rem; font-size: 0.875rem;">View</button>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div style="text-align: center; padding: 4rem 2rem; color: var(--text-color);">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-bottom: 1.5rem; opacity: 0.4;">
                    <path d="M20 7H4C2.89543 7 2 7.89543 2 9V19C2 20.1046 2.89543 21 4 21H20C21.1046 21 22 20.1046 22 19V9C22 7.89543 21.1046 7 20 7Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M16 21V5C16 4.46957 15.7893 3.96086 15.4142 3.58579C15.0391 3.21071 14.5304 3 14 3H10C9.46957 3 8.96086 3.21071 8.58579 3.58579C8.21071 3.96086 8 4.46957 8 5V21" stroke="currentColor" stroke-width="2"/>
                </svg>
                <h3 style="font-size: 1.5rem; margin-bottom: 0.75rem; opacity: 0.8;">No Jobs Yet</h3>
                <p style="opacity: 0.6; margin-bottom: 2rem;">You haven't created any jobs yet. Start by creating your first job!</p>
                <a href="{% url 'create_job' %}" class="btn btn-primary">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Create Your First Job
                </a>
            </div>
        {% endif %}
    </div>
</div>

<style>
    .card {
        animation: fadeInUp 0.5s ease-out;
    }
</style>
{% endblock %}